<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lintoria Hub</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET & VARIABLES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*, *::before, *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    /* Backgrounds */
    --bg-primary: #050507;
    --bg-secondary: #0a0a0d;
    --bg-tertiary: #0f0f14;
    --bg-card: #12121a;
    --bg-elevated: #1a1a24;
    --bg-hover: #22222e;
    
    /* Borders */
    --border-subtle: #1f1f2a;
    --border-default: #2a2a38;
    --border-strong: #3a3a4a;
    
    /* Text */
    --text-primary: #f4f4f5;
    --text-secondary: #a1a1aa;
    --text-muted: #71717a;
    --text-faint: #52525b;
    
    /* Brand Colors */
    --gold-primary: #f59e0b;
    --gold-secondary: #fbbf24;
    --gold-tertiary: #fcd34d;
    --gold-dark: #b45309;
    
    /* Status Colors */
    --green-primary: #10b981;
    --green-light: #34d399;
    --green-dark: #059669;
    --red-primary: #ef4444;
    --red-light: #f87171;
    --red-dark: #dc2626;
    --blue-primary: #3b82f6;
    --blue-light: #60a5fa;
    --purple-primary: #a855f7;
    --cyan-primary: #06b6d4;
    
    /* Sizing */
    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 14px;
    --radius-xl: 20px;
    
    /* Shadows */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
    --shadow-gold: 0 4px 24px rgba(245, 158, 11, 0.25);
    
    /* Transitions */
    --transition-fast: 0.15s ease;
    --transition-normal: 0.25s ease;
    --transition-slow: 0.4s ease;
}

html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    line-height: 1.5;
    overflow-x: hidden;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BACKGROUND EFFECTS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.bg-glow {
    position: fixed;
    border-radius: 50%;
    filter: blur(150px);
    opacity: 0.08;
    pointer-events: none;
    z-index: 0;
}

.bg-glow-1 {
    width: 800px;
    height: 800px;
    background: var(--gold-primary);
    top: -400px;
    left: -300px;
}

.bg-glow-2 {
    width: 600px;
    height: 600px;
    background: var(--blue-primary);
    bottom: -300px;
    right: -200px;
}

.bg-glow-3 {
    width: 400px;
    height: 400px;
    background: var(--purple-primary);
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    opacity: 0.04;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TYPOGRAPHY
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
h1, h2, h3, h4, h5, h6 {
    font-family: 'Space Grotesk', sans-serif;
    font-weight: 600;
    line-height: 1.2;
}

.font-display { font-family: 'Space Grotesk', sans-serif; }
.font-mono { font-family: 'JetBrains Mono', monospace; }

.text-gold { color: var(--gold-primary); }
.text-green { color: var(--green-primary); }
.text-red { color: var(--red-primary); }
.text-blue { color: var(--blue-primary); }
.text-muted { color: var(--text-muted); }
.text-secondary { color: var(--text-secondary); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UTILITIES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hidden { display: none !important; }
.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.gap-1 { gap: 8px; }
.gap-2 { gap: 16px; }
.gap-3 { gap: 24px; }
.w-full { width: 100%; }
.text-center { text-align: center; }
.mt-1 { margin-top: 8px; }
.mt-2 { margin-top: 16px; }
.mb-1 { margin-bottom: 8px; }
.mb-2 { margin-bottom: 16px; }
.mb-3 { margin-bottom: 24px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BUTTONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 24px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    line-height: 1;
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-normal);
    text-decoration: none;
    white-space: nowrap;
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none !important;
}

.btn-gold {
    background: linear-gradient(135deg, var(--gold-primary), var(--gold-dark));
    color: #000;
    box-shadow: var(--shadow-gold);
}

.btn-gold:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--gold-secondary), var(--gold-primary));
    transform: translateY(-2px);
    box-shadow: 0 6px 30px rgba(245, 158, 11, 0.4);
}

.btn-green {
    background: linear-gradient(135deg, var(--green-primary), var(--green-dark));
    color: #fff;
}

.btn-green:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--green-light), var(--green-primary));
    transform: translateY(-2px);
}

.btn-red {
    background: linear-gradient(135deg, var(--red-primary), var(--red-dark));
    color: #fff;
}

.btn-red:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--red-light), var(--red-primary));
    transform: translateY(-2px);
}

.btn-dark {
    background: var(--bg-elevated);
    color: var(--text-secondary);
    border: 1px solid var(--border-default);
}

.btn-dark:hover:not(:disabled) {
    background: var(--bg-hover);
    border-color: var(--border-strong);
    color: var(--text-primary);
}

.btn-sm {
    padding: 8px 14px;
    font-size: 12px;
}

.btn-lg {
    padding: 16px 32px;
    font-size: 16px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FORMS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.field {
    margin-bottom: 16px;
}

.field label {
    display: block;
    font-size: 11px;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
}

.field input,
.field select,
.field textarea {
    width: 100%;
    padding: 14px 16px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-md);
    color: var(--text-primary);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    transition: all var(--transition-fast);
}

.field input:focus,
.field select:focus,
.field textarea:focus {
    outline: none;
    border-color: var(--gold-primary);
    background: var(--bg-secondary);
    box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
}

.field input::placeholder {
    color: var(--text-faint);
}

.field input[type="number"] {
    font-family: 'JetBrains Mono', monospace;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AUTH SCREEN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.auth-screen {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
    position: relative;
    z-index: 1;
}

.auth-container {
    width: 100%;
    max-width: 440px;
}

.auth-logo {
    text-align: center;
    margin-bottom: 40px;
}

.auth-logo-icon {
    width: 88px;
    height: 88px;
    background: linear-gradient(135deg, var(--gold-primary), var(--gold-dark));
    border-radius: var(--radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 44px;
    margin: 0 auto 20px;
    box-shadow: var(--shadow-gold);
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
}

.auth-logo-text {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 42px;
    font-weight: 700;
    background: linear-gradient(135deg, var(--gold-primary), var(--gold-secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.auth-logo-sub {
    font-size: 14px;
    color: var(--text-muted);
    margin-top: 4px;
}

.auth-warning {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 14px 18px;
    background: rgba(239, 68, 68, 0.08);
    border: 1px solid rgba(239, 68, 68, 0.2);
    border-radius: var(--radius-md);
    margin-bottom: 24px;
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.5;
}

.auth-warning-icon {
    font-size: 18px;
    flex-shrink: 0;
}

.auth-warning strong {
    color: var(--red-primary);
}

.auth-card {
    background: var(--bg-card);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-lg);
    padding: 32px;
    box-shadow: var(--shadow-lg);
}

.auth-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 28px;
}

.auth-tab {
    flex: 1;
    padding: 14px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-md);
    color: var(--text-muted);
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.auth-tab:hover {
    background: var(--bg-hover);
    color: var(--text-secondary);
}

.auth-tab.active {
    background: rgba(245, 158, 11, 0.1);
    border-color: var(--gold-primary);
    color: var(--gold-primary);
}

.auth-form {
    display: none;
}

.auth-form.active {
    display: block;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN APP LAYOUT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.app {
    display: none;
}

.app.active {
    display: block;
}

/* Header */
.header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(5, 5, 7, 0.92);
    backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--border-subtle);
    padding: 0;
}

.header-inner {
    max-width: 1440px;
    margin: 0 auto;
    padding: 14px 28px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 20px;
}

.header-logo {
    display: flex;
    align-items: center;
    gap: 12px;
}

.header-logo-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--gold-primary), var(--gold-dark));
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
}

.header-logo-text {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 22px;
    font-weight: 700;
    color: var(--gold-primary);
}

.header-balance {
    text-align: right;
}

.header-balance-label {
    font-size: 10px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.header-balance-value {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 24px;
    font-weight: 700;
    color: var(--gold-primary);
}

.header-user {
    width: 42px;
    height: 42px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-default);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-weight: 700;
    font-size: 16px;
    color: var(--text-secondary);
    transition: all var(--transition-fast);
}

.header-user:hover {
    border-color: var(--gold-primary);
    color: var(--gold-primary);
    background: rgba(245, 158, 11, 0.1);
}

/* Main Content */
.main {
    max-width: 1440px;
    margin: 0 auto;
    padding: 28px;
    position: relative;
    z-index: 1;
}

/* Navigation */
.nav {
    display: flex;
    gap: 8px;
    padding-bottom: 28px;
    overflow-x: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.nav::-webkit-scrollbar {
    display: none;
}

.nav-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 18px;
    background: transparent;
    border: 1px solid var(--border-default);
    border-radius: var(--radius-md);
    color: var(--text-secondary);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    white-space: nowrap;
    transition: all var(--transition-fast);
}

.nav-btn:hover {
    background: var(--bg-elevated);
    border-color: var(--border-strong);
    color: var(--text-primary);
}

.nav-btn.active {
    background: rgba(245, 158, 11, 0.1);
    border-color: var(--gold-primary);
    color: var(--gold-primary);
}

.nav-btn-icon {
    font-size: 16px;
}

/* Sections */
.section {
    display: none;
}

.section.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CARDS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card {
    background: var(--bg-card);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-lg);
    padding: 24px;
    margin-bottom: 24px;
    transition: all var(--transition-fast);
}

.card:hover {
    border-color: var(--border-strong);
}

.card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border-subtle);
}

.card-title {
    font-size: 16px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
}

.card-title-icon {
    font-size: 20px;
}

/* Grid Layouts */
.grid {
    display: grid;
    gap: 24px;
}

.grid-2 {
    grid-template-columns: repeat(2, 1fr);
}

.grid-3 {
    grid-template-columns: repeat(3, 1fr);
}

.grid-4 {
    grid-template-columns: repeat(4, 1fr);
}

@media (max-width: 1024px) {
    .grid-3, .grid-4 { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 768px) {
    .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; }
    .main { padding: 16px; }
    .header-inner { padding: 12px 16px; }
    .header-balance { display: none; }
    .nav-btn span:not(.nav-btn-icon) { display: none; }
    .nav-btn { padding: 12px 14px; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 16px;
}

.stat-card {
    background: var(--bg-elevated);
    border-radius: var(--radius-md);
    padding: 20px;
    text-align: center;
    transition: all var(--transition-fast);
}

.stat-card:hover {
    background: var(--bg-hover);
    transform: translateY(-2px);
}

.stat-value {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 28px;
    font-weight: 700;
    color: var(--gold-primary);
    margin-bottom: 4px;
}

.stat-label {
    font-size: 11px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TRANSACTIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.tx-list {
    max-height: 400px;
    overflow-y: auto;
}

.tx-list::-webkit-scrollbar {
    width: 6px;
}

.tx-list::-webkit-scrollbar-track {
    background: var(--bg-tertiary);
    border-radius: 3px;
}

.tx-list::-webkit-scrollbar-thumb {
    background: var(--border-strong);
    border-radius: 3px;
}

.tx-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 0;
    border-bottom: 1px solid var(--border-subtle);
}

.tx-item:last-child {
    border-bottom: none;
}

.tx-info {
    flex: 1;
}

.tx-type {
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 2px;
}

.tx-desc {
    font-size: 12px;
    color: var(--text-muted);
}

.tx-amount {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 600;
    font-size: 14px;
}

.tx-amount.positive {
    color: var(--green-primary);
}

.tx-amount.negative {
    color: var(--red-primary);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CASINO GAMES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.games-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 24px;
}

.game-card {
    background: var(--bg-card);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: all var(--transition-normal);
}

.game-card:hover {
    border-color: var(--gold-primary);
    transform: translateY(-4px);
    box-shadow: var(--shadow-gold);
}

.game-header {
    padding: 18px 24px;
    background: var(--bg-elevated);
    border-bottom: 1px solid var(--border-subtle);
}

.game-title {
    font-size: 18px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
}

.game-body {
    padding: 24px;
}

.game-result {
    margin-top: 16px;
    padding: 16px;
    background: var(--bg-elevated);
    border-radius: var(--radius-md);
    text-align: center;
    min-height: 52px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 500;
}

/* Slots */
.slots-reels {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-bottom: 20px;
}

.slot-reel {
    width: 80px;
    height: 100px;
    background: var(--bg-tertiary);
    border: 2px solid var(--border-strong);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 48px;
    transition: all var(--transition-fast);
}

.slot-reel.spinning {
    animation: slotSpin 0.08s linear infinite;
}

@keyframes slotSpin {
    0%, 100% { transform: translateY(-3px); }
    50% { transform: translateY(3px); }
}

/* Roulette */
.roulette-wheel {
    width: 160px;
    height: 160px;
    margin: 0 auto 20px;
    border-radius: 50%;
    background: conic-gradient(
        #ef4444 0deg 9.73deg, #1a1a24 9.73deg 19.46deg,
        #ef4444 19.46deg 29.19deg, #1a1a24 29.19deg 38.92deg,
        #ef4444 38.92deg 48.65deg, #1a1a24 48.65deg 58.38deg,
        #ef4444 58.38deg 68.11deg, #1a1a24 68.11deg 77.84deg,
        #ef4444 77.84deg 87.57deg, #1a1a24 87.57deg 97.3deg,
        #ef4444 97.3deg 107.03deg, #1a1a24 107.03deg 116.76deg,
        #ef4444 116.76deg 126.49deg, #1a1a24 126.49deg 136.22deg,
        #ef4444 136.22deg 145.95deg, #1a1a24 145.95deg 155.68deg,
        #ef4444 155.68deg 165.41deg, #1a1a24 165.41deg 175.14deg,
        #ef4444 175.14deg 184.87deg, #1a1a24 184.87deg 194.6deg,
        #ef4444 194.6deg 204.33deg, #1a1a24 204.33deg 214.06deg,
        #ef4444 214.06deg 223.79deg, #1a1a24 223.79deg 233.52deg,
        #ef4444 233.52deg 243.25deg, #1a1a24 243.25deg 252.98deg,
        #ef4444 252.98deg 262.71deg, #1a1a24 262.71deg 272.44deg,
        #ef4444 272.44deg 282.17deg, #1a1a24 282.17deg 291.9deg,
        #ef4444 291.9deg 301.63deg, #1a1a24 301.63deg 311.36deg,
        #ef4444 311.36deg 321.09deg, #1a1a24 321.09deg 330.82deg,
        #ef4444 330.82deg 340.55deg, #1a1a24 340.55deg 350.28deg,
        #10b981 350.28deg 360deg
    );
    border: 4px solid var(--gold-primary);
    box-shadow: var(--shadow-gold), inset 0 0 30px rgba(0, 0, 0, 0.5);
    transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
    position: relative;
}

.roulette-wheel::before {
    content: 'â–¼';
    position: absolute;
    top: -24px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 20px;
    color: var(--gold-primary);
}

.roulette-wheel::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 30px;
    height: 30px;
    background: var(--gold-primary);
    border-radius: 50%;
}

.color-buttons {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin-bottom: 16px;
}

.color-btn {
    padding: 10px 20px;
    border: 2px solid transparent;
    border-radius: var(--radius-sm);
    font-weight: 600;
    font-size: 13px;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.color-btn.red { background: var(--red-primary); color: #fff; }
.color-btn.black { background: #1a1a24; color: #fff; }
.color-btn.green { background: var(--green-primary); color: #fff; }

.color-btn.selected {
    border-color: var(--gold-primary);
    transform: scale(1.08);
    box-shadow: 0 0 20px rgba(245, 158, 11, 0.5);
}

/* Coin Flip */
.coin-container {
    perspective: 1000px;
    margin: 0 auto 20px;
}

.coin {
    width: 120px;
    height: 120px;
    margin: 0 auto;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 1.5s ease-out;
}

.coin-face {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 48px;
    backface-visibility: hidden;
    border: 4px solid var(--gold-primary);
    box-shadow: var(--shadow-md);
}

.coin-heads {
    background: linear-gradient(135deg, var(--gold-secondary), var(--gold-primary));
}

.coin-tails {
    background: linear-gradient(135deg, #64748b, #475569);
    transform: rotateY(180deg);
}

.coin.flipping {
    animation: coinFlip 1.5s ease-out;
}

@keyframes coinFlip {
    0% { transform: rotateY(0); }
    100% { transform: rotateY(1800deg); }
}

.coin-buttons {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-bottom: 16px;
}

/* Dice */
.dice-display {
    font-size: 80px;
    text-align: center;
    margin-bottom: 20px;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

.dice-display.rolling {
    animation: diceShake 0.1s linear infinite;
}

@keyframes diceShake {
    0%, 100% { transform: rotate(-5deg); }
    50% { transform: rotate(5deg); }
}

/* Crash */
.crash-display {
    text-align: center;
    margin-bottom: 20px;
}

.crash-multiplier {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 64px;
    font-weight: 700;
    color: var(--green-primary);
    text-shadow: 0 0 50px rgba(16, 185, 129, 0.5);
    transition: all var(--transition-fast);
}

.crash-multiplier.crashed {
    color: var(--red-primary);
    text-shadow: 0 0 50px rgba(239, 68, 68, 0.5);
}

.crash-buttons {
    display: flex;
    gap: 10px;
}

.crash-buttons .btn {
    flex: 1;
}

/* Blackjack */
.blackjack-table {
    background: linear-gradient(135deg, #065f46, #047857);
    border-radius: var(--radius-lg);
    padding: 24px;
    margin-bottom: 16px;
    box-shadow: inset 0 2px 20px rgba(0, 0, 0, 0.3);
}

.blackjack-section {
    margin-bottom: 16px;
}

.blackjack-label {
    font-size: 11px;
    color: rgba(255, 255, 255, 0.7);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
}

.blackjack-hand {
    display: flex;
    gap: 8px;
    justify-content: center;
    min-height: 90px;
    flex-wrap: wrap;
}

.blackjack-card {
    width: 56px;
    height: 80px;
    background: #fff;
    border-radius: var(--radius-sm);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: bold;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transition: transform var(--transition-fast);
}

.blackjack-card:hover {
    transform: translateY(-4px);
}

.blackjack-card.red { color: var(--red-primary); }
.blackjack-card.black { color: #1a1a24; }

.blackjack-card.face-down {
    background: linear-gradient(135deg, #1e3a5f, #0f172a);
    color: transparent;
}

.blackjack-card.face-down::before {
    content: 'ğŸ‚ ';
    font-size: 40px;
    color: #fff;
}

.blackjack-score {
    text-align: center;
    color: #fff;
    font-weight: 600;
    font-size: 18px;
    margin-top: 8px;
}

.blackjack-controls {
    display: flex;
    gap: 10px;
    justify-content: center;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHEAT MULTIPLAYER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cheat-game {
    grid-column: span 2;
}

@media (max-width: 768px) {
    .cheat-game { grid-column: span 1; }
}

.lobbies-list {
    display: grid;
    gap: 12px;
    margin-bottom: 24px;
}

.lobby-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background: var(--bg-elevated);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-md);
    transition: all var(--transition-fast);
}

.lobby-item:hover {
    border-color: var(--border-strong);
    background: var(--bg-hover);
}

.lobby-info h4 {
    font-size: 15px;
    margin-bottom: 4px;
}

.lobby-meta {
    font-size: 12px;
    color: var(--text-muted);
}

.cheat-status {
    text-align: center;
    padding: 24px;
    background: var(--bg-elevated);
    border-radius: var(--radius-md);
    margin-bottom: 20px;
}

.cheat-turn {
    font-size: 20px;
    font-weight: 700;
}

.cheat-turn.my-turn {
    color: var(--green-primary);
    animation: pulse 1s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.pile-display {
    background: var(--bg-elevated);
    border-radius: var(--radius-md);
    padding: 20px;
    text-align: center;
    margin-bottom: 20px;
}

.pile-count {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 56px;
    font-weight: 700;
    color: var(--gold-primary);
}

.pile-label {
    font-size: 13px;
    color: var(--text-muted);
    margin-top: 4px;
}

.cheat-hand {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
    margin-bottom: 24px;
    min-height: 100px;
    padding: 16px;
    background: var(--bg-elevated);
    border-radius: var(--radius-md);
}

.cheat-card {
    width: 58px;
    height: 82px;
    background: #fff;
    border-radius: var(--radius-sm);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    border: 3px solid transparent;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    transition: all var(--transition-fast);
}

.cheat-card:hover {
    transform: translateY(-10px);
}

.cheat-card.selected {
    border-color: var(--gold-primary);
    transform: translateY(-16px);
    box-shadow: 0 8px 24px rgba(245, 158, 11, 0.4);
}

.cheat-card.red { color: var(--red-primary); }
.cheat-card.black { color: #1a1a24; }

.cheat-controls {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.cheat-controls .btn-row {
    display: flex;
    gap: 10px;
}

.cheat-controls .btn-row .btn {
    flex: 1;
}

.players-list {
    display: grid;
    gap: 8px;
    margin-bottom: 20px;
}

.player-item {
    padding: 12px 16px;
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    font-size: 14px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EMOJI PACKS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.packs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 16px;
    margin-bottom: 24px;
}

.pack-card {
    background: var(--bg-elevated);
    border: 2px solid var(--border-default);
    border-radius: var(--radius-md);
    padding: 20px 16px;
    text-align: center;
    cursor: pointer;
    transition: all var(--transition-normal);
}

.pack-card:hover {
    transform: translateY(-6px);
    border-color: var(--border-strong);
    box-shadow: var(--shadow-md);
}

.pack-card.selected {
    border-color: var(--gold-primary);
    background: rgba(245, 158, 11, 0.1);
    box-shadow: var(--shadow-gold);
}

.pack-emoji {
    font-size: 48px;
    margin-bottom: 12px;
}

.pack-name {
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 4px;
}

.pack-price {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 600;
    font-size: 15px;
    color: var(--gold-primary);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COLLECTION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.collection-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 12px;
}

.collection-item {
    background: var(--bg-elevated);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-md);
    padding: 16px 12px;
    text-align: center;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.collection-item:hover {
    transform: scale(1.05);
    border-color: var(--gold-primary);
    box-shadow: var(--shadow-gold);
}

.collection-emoji {
    font-size: 36px;
    margin-bottom: 8px;
}

.collection-rarity {
    font-size: 9px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 3px 6px;
    border-radius: 4px;
    display: inline-block;
}

.rarity-common { background: #6b7280; color: #fff; }
.rarity-uncommon { background: var(--green-primary); color: #fff; }
.rarity-rare { background: var(--blue-primary); color: #fff; }
.rarity-epic { background: var(--purple-primary); color: #fff; }
.rarity-legendary { background: linear-gradient(135deg, var(--gold-secondary), var(--gold-primary)); color: #000; }
.rarity-mythic { background: linear-gradient(135deg, #ec4899, #be185d); color: #fff; }
.rarity-divine { background: linear-gradient(135deg, var(--cyan-primary), #0891b2); color: #fff; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STOCKS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.tax-banner {
    background: rgba(245, 158, 11, 0.1);
    border: 1px solid rgba(245, 158, 11, 0.2);
    border-radius: var(--radius-md);
    padding: 12px 16px;
    margin-bottom: 24px;
    text-align: center;
    font-size: 13px;
    color: var(--text-secondary);
}

.tax-banner strong {
    color: var(--gold-primary);
}

.stocks-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 16px;
}

.stock-card {
    background: var(--bg-elevated);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-md);
    padding: 20px;
    transition: all var(--transition-fast);
}

.stock-card:hover {
    border-color: var(--border-strong);
    background: var(--bg-hover);
}

.stock-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
}

.stock-symbol {
    font-family: 'Space Grotesk', sans-serif;
    font-weight: 700;
    font-size: 16px;
}

.stock-change {
    font-size: 11px;
    font-weight: 600;
    padding: 4px 8px;
    border-radius: 4px;
}

.stock-change.up {
    background: rgba(16, 185, 129, 0.15);
    color: var(--green-primary);
}

.stock-change.down {
    background: rgba(239, 68, 68, 0.15);
    color: var(--red-primary);
}

.stock-name {
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 8px;
}

.stock-price {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 16px;
}

.stock-actions {
    display: flex;
    gap: 8px;
}

.stock-actions input {
    width: 60px;
    padding: 8px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    text-align: center;
}

.holdings-table {
    width: 100%;
    border-collapse: collapse;
}

.holdings-table th,
.holdings-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid var(--border-subtle);
}

.holdings-table th {
    font-size: 10px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 600;
}

.profit-positive { color: var(--green-primary); }
.profit-negative { color: var(--red-primary); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOANS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.loan-card {
    background: var(--bg-elevated);
    border-radius: var(--radius-md);
    padding: 20px;
    margin-bottom: 16px;
    border-left: 4px solid var(--gold-primary);
    transition: all var(--transition-fast);
}

.loan-card.overdue {
    border-left-color: var(--red-primary);
    background: rgba(239, 68, 68, 0.08);
}

.loan-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.loan-id {
    font-weight: 600;
    color: var(--gold-primary);
}

.loan-due {
    font-size: 12px;
    color: var(--text-muted);
}

.loan-due.overdue {
    color: var(--red-primary);
    font-weight: 600;
}

.loan-details {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    font-size: 13px;
    margin-bottom: 16px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LEADERBOARD
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.leaderboard-list {
    
}

.leaderboard-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 14px 0;
    border-bottom: 1px solid var(--border-subtle);
}

.leaderboard-item:last-child {
    border-bottom: none;
}

.leaderboard-rank {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 16px;
    background: var(--bg-elevated);
}

.leaderboard-rank.rank-1 {
    background: linear-gradient(135deg, var(--gold-secondary), var(--gold-primary));
    color: #000;
}

.leaderboard-rank.rank-2 {
    background: linear-gradient(135deg, #94a3b8, #64748b);
    color: #fff;
}

.leaderboard-rank.rank-3 {
    background: linear-gradient(135deg, #f59e0b, #b45309);
    color: #fff;
}

.leaderboard-info {
    flex: 1;
}

.leaderboard-name {
    font-weight: 600;
    font-size: 15px;
}

.leaderboard-score {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 600;
    color: var(--gold-primary);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHAT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.chat-container {
    height: 450px;
    display: flex;
    flex-direction: column;
}

.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    background: var(--bg-elevated);
    border-radius: var(--radius-md);
    margin-bottom: 16px;
}

.chat-messages::-webkit-scrollbar {
    width: 6px;
}

.chat-messages::-webkit-scrollbar-track {
    background: var(--bg-tertiary);
}

.chat-messages::-webkit-scrollbar-thumb {
    background: var(--border-strong);
    border-radius: 3px;
}

.chat-message {
    margin-bottom: 16px;
}

.chat-message:last-child {
    margin-bottom: 0;
}

.chat-message-header {
    display: flex;
    align-items: baseline;
    gap: 10px;
    margin-bottom: 4px;
}

.chat-author {
    font-weight: 600;
    font-size: 13px;
    color: var(--gold-primary);
}

.chat-time {
    font-size: 10px;
    color: var(--text-faint);
}

.chat-text {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.5;
}

.chat-input-row {
    display: flex;
    gap: 12px;
}

.chat-input-row input {
    flex: 1;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ADMIN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.admin-table {
    width: 100%;
    border-collapse: collapse;
}

.admin-table th,
.admin-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid var(--border-subtle);
}

.admin-table th {
    font-size: 10px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST NOTIFICATIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toast {
    position: fixed;
    bottom: 24px;
    right: 24px;
    background: var(--bg-card);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-md);
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: var(--shadow-lg);
    z-index: 10000;
    transform: translateX(400px);
    opacity: 0;
    transition: all var(--transition-normal);
}

.toast.show {
    transform: translateX(0);
    opacity: 1;
}

.toast.success {
    border-color: var(--green-primary);
}

.toast.error {
    border-color: var(--red-primary);
}

.toast-icon {
    font-size: 20px;
}

.toast-message {
    font-size: 14px;
    font-weight: 500;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10001;
    opacity: 0;
    visibility: hidden;
    transition: all var(--transition-normal);
}

.modal.show {
    opacity: 1;
    visibility: visible;
}

.modal-content {
    text-align: center;
    transform: scale(0.8);
    transition: transform var(--transition-normal);
}

.modal.show .modal-content {
    transform: scale(1);
    animation: modalPop 0.5s ease-out;
}

@keyframes modalPop {
    0% { transform: scale(0) rotate(-180deg); }
    100% { transform: scale(1) rotate(0); }
}

.reveal-emoji {
    font-size: 120px;
    margin-bottom: 16px;
    filter: drop-shadow(0 8px 24px rgba(0, 0, 0, 0.5));
}

.reveal-rarity {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 32px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 3px;
    margin-bottom: 8px;
}

.reveal-points {
    font-size: 18px;
    color: var(--text-secondary);
    margin-bottom: 24px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EMPTY STATES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.empty-state {
    text-align: center;
    padding: 40px 20px;
    color: var(--text-muted);
}

.empty-state-icon {
    font-size: 48px;
    margin-bottom: 16px;
    opacity: 0.5;
}

.empty-state-text {
    font-size: 14px;
}
</style>
</head>
<body>

<!-- Background Effects -->
<div class="bg-glow bg-glow-1"></div>
<div class="bg-glow bg-glow-2"></div>
<div class="bg-glow bg-glow-3"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     AUTH SCREEN
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="auth-screen" id="authScreen">
    <div class="auth-container">
        <div class="auth-logo">
            <div class="auth-logo-icon">ğŸ›ï¸</div>
            <div class="auth-logo-text">Lintoria</div>
            <div class="auth-logo-sub">Virtual Economy Hub</div>
        </div>
        
        <div class="auth-warning">
            <span class="auth-warning-icon">âš ï¸</span>
            <span><strong>Disclaimer:</strong> This is a simulation using virtual currency for entertainment purposes only. No real money is involved.</span>
        </div>
        
        <div class="auth-card">
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login', this)">Sign In</button>
                <button class="auth-tab" onclick="switchAuthTab('register', this)">Create Account</button>
            </div>
            
            <div class="auth-form active" id="loginForm">
                <div class="field">
                    <label>Email Address</label>
                    <input type="email" id="loginEmail" placeholder="you@example.com">
                </div>
                <div class="field">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                </div>
                <button class="btn btn-gold w-full" onclick="handleLogin()">Sign In</button>
            </div>
            
            <div class="auth-form" id="registerForm">
                <div class="field">
                    <label>Email Address</label>
                    <input type="email" id="registerEmail" placeholder="you@example.com">
                </div>
                <div class="field">
                    <label>Display Name</label>
                    <input type="text" id="registerName" placeholder="Your name">
                </div>
                <div class="field">
                    <label>Password</label>
                    <input type="password" id="registerPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                </div>
                <button class="btn btn-green w-full" onclick="handleRegister()">Create Account</button>
            </div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MAIN APPLICATION
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="app" id="app">
    <!-- Header -->
    <header class="header">
        <div class="header-inner">
            <div class="header-logo">
                <div class="header-logo-icon">ğŸ›ï¸</div>
                <span class="header-logo-text">Lintoria</span>
            </div>
            <div class="header-balance">
                <div class="header-balance-label">Balance</div>
                <div class="header-balance-value" id="headerBalance">$0.00</div>
            </div>
            <div class="header-user" onclick="handleLogout()" title="Click to logout">
                <span id="userInitial">?</span>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="main">
        <!-- Navigation -->
        <nav class="nav" id="mainNav">
            <button class="nav-btn active" data-section="dashboard">
                <span class="nav-btn-icon">ğŸ“Š</span>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" data-section="casino">
                <span class="nav-btn-icon">ğŸ°</span>
                <span>Casino</span>
            </button>
            <button class="nav-btn" data-section="packs">
                <span class="nav-btn-icon">ğŸ</span>
                <span>Packs</span>
            </button>
            <button class="nav-btn" data-section="collection">
                <span class="nav-btn-icon">ğŸ’</span>
                <span>Collection</span>
            </button>
            <button class="nav-btn" data-section="stocks">
                <span class="nav-btn-icon">ğŸ“ˆ</span>
                <span>Stocks</span>
            </button>
            <button class="nav-btn" data-section="loans">
                <span class="nav-btn-icon">ğŸ¦</span>
                <span>Loans</span>
            </button>
            <button class="nav-btn" data-section="leaderboard">
                <span class="nav-btn-icon">ğŸ†</span>
                <span>Leaderboard</span>
            </button>
            <button class="nav-btn" data-section="chat">
                <span class="nav-btn-icon">ğŸ’¬</span>
                <span>Chat</span>
            </button>
            <button class="nav-btn hidden" data-section="admin" id="adminNavBtn">
                <span class="nav-btn-icon">ğŸ‘‘</span>
                <span>Admin</span>
            </button>
        </nav>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             DASHBOARD SECTION
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <section class="section active" id="section-dashboard">
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <span class="card-title-icon">ğŸ“Š</span>
                            Your Stats
                        </h2>
                        <button class="btn btn-sm btn-dark" onclick="loadDashboard()">Refresh</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="statBalance">$0</div>
                            <div class="stat-label">Balance</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="statCredit">0</div>
                            <div class="stat-label">Credit Score</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="statEmojiPts">0</div>
                            <div class="stat-label">Emoji Points</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="statNetGambling">$0</div>
                            <div class="stat-label">Net Gambling</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <span class="card-title-icon">ğŸ’¸</span>
                            Transfer Money
                        </h2>
                    </div>
                    <div class="field">
                        <label>Recipient Email</label>
                        <input type="email" id="transferTo" placeholder="friend@example.com">
                    </div>
                    <div class="field">
                        <label>Amount</label>
                        <input type="number" id="transferAmount" placeholder="0.00" min="1">
                    </div>
                    <div class="field">
                        <label>Note (Optional)</label>
                        <input type="text" id="transferNote" placeholder="What's this for?">
                    </div>
                    <button class="btn btn-gold w-full" onclick="handleTransfer()">Send Money</button>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <span class="card-title-icon">ğŸ“œ</span>
                        Recent Transactions
                    </h2>
                </div>
                <div class="tx-list" id="transactionsList">
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“œ</div>
                        <div class="empty-state-text">Loading transactions...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             CASINO SECTION
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <section class="section" id="section-casino">
            <div class="games-grid">
                <!-- Slots -->
                <div class="game-card">
                    <div class="game-header">
                        <h3 class="game-title">ğŸ° Slot Machine</h3>
                    </div>
                    <div class="game-body">
                        <div class="slots-reels">
                            <div class="slot-reel" id="reel1">ğŸ’</div>
                            <div class="slot-reel" id="reel2">ğŸ’</div>
                            <div class="slot-reel" id="reel3">ğŸ’</div>
                        </div>
                        <div class="field">
                            <label>Bet Amount</label>
                            <input type="number" id="slotsBet" placeholder="100" min="1">
                        </div>
                        <button class="btn btn-gold w-full" onclick="playSlots()">ğŸ° Spin</button>
                        <div class="game-result" id="slotsResult"></div>
                    </div>
                </div>

                <!-- Roulette -->
                <div class="game-card">
                    <div class="game-header">
                        <h3 class="game-title">ğŸ¡ Roulette</h3>
                    </div>
                    <div class="game-body">
                        <div class="roulette-wheel" id="rouletteWheel"></div>
                        <div class="color-buttons">
                            <button class="color-btn red" onclick="selectColor('red', this)">Red</button>
                            <button class="color-btn black" onclick="selectColor('black', this)">Black</button>
                            <button class="color-btn green" onclick="selectColor('green', this)">Green</button>
                        </div>
                        <div class="field">
                            <label>Bet Amount</label>
                            <input type="number" id="rouletteBet" placeholder="100" min="1">
                        </div>
                        <button class="btn btn-gold w-full" id="rouletteBtn" onclick="playRoulette()">ğŸ¡ Spin</button>
                        <div class="game-result" id="rouletteResult"></div>
                    </div>
                </div>

                <!-- Coin Flip -->
                <div class="game-card">
                    <div class="game-header">
                        <h3 class="game-title">ğŸª™ Coin Flip</h3>
                    </div>
                    <div class="game-body">
                        <div class="coin-container">
                            <div class="coin" id="coin">
                                <div class="coin-face coin-heads">ğŸ‘‘</div>
                                <div class="coin-face coin-tails">ğŸ¦…</div>
                            </div>
                        </div>
                        <div class="field">
                            <label>Bet Amount</label>
                            <input type="number" id="coinBet" placeholder="100" min="1">
                        </div>
                        <div class="coin-buttons">
                            <button class="btn btn-green" onclick="playCoinFlip('heads')">ğŸ‘‘ Heads</button>
                            <button class="btn btn-dark" onclick="playCoinFlip('tails')">ğŸ¦… Tails</button>
                        </div>
                        <div class="game-result" id="coinResult"></div>
                    </div>
                </div>

                <!-- Dice -->
                <div class="game-card">
                    <div class="game-header">
                        <h3 class="game-title">ğŸ² Dice Roll</h3>
                    </div>
                    <div class="game-body">
                        <div class="dice-display" id="dice">ğŸ²</div>
                        <p class="text-muted text-center mb-2" style="font-size: 12px;">Roll 4-6 to win (1.9x payout)</p>
                        <div class="field">
                            <label>Bet Amount</label>
                            <input type="number" id="diceBet" placeholder="100" min="1">
                        </div>
                        <button class="btn btn-gold w-full" onclick="playDice()">ğŸ² Roll</button>
                        <div class="game-result" id="diceResult"></div>
                    </div>
                </div>

                <!-- Crash -->
                <div class="game-card">
                    <div class="game-header">
                        <h3 class="game-title">ğŸš€ Crash</h3>
                    </div>
                    <div class="game-body">
                        <div class="crash-display">
                            <div class="crash-multiplier" id="crashMultiplier">1.00x</div>
                        </div>
                        <div class="field">
                            <label>Bet Amount</label>
                            <input type="number" id="crashBet" placeholder="100" min="1">
                        </div>
                        <div class="crash-buttons">
                            <button class="btn btn-green" id="crashStartBtn" onclick="startCrash()">ğŸš€ Start</button>
                            <button class="btn btn-red" id="crashCashBtn" onclick="cashOutCrash()" disabled>ğŸ’° Cash Out</button>
                        </div>
                        <div class="game-result" id="crashResult"></div>
                    </div>
                </div>

                <!-- Blackjack -->
                <div class="game-card">
                    <div class="game-header">
                        <h3 class="game-title">ğŸƒ Blackjack</h3>
                    </div>
                    <div class="game-body">
                        <div class="blackjack-table">
                            <div class="blackjack-section">
                                <div class="blackjack-label">Dealer</div>
                                <div class="blackjack-hand" id="dealerHand"></div>
                                <div class="blackjack-score" id="dealerScore"></div>
                            </div>
                            <div class="blackjack-section">
                                <div class="blackjack-label">Your Hand</div>
                                <div class="blackjack-hand" id="playerHand"></div>
                                <div class="blackjack-score" id="playerScore"></div>
                            </div>
                        </div>
                        <div id="blackjackBetArea">
                            <div class="field">
                                <label>Bet Amount</label>
                                <input type="number" id="blackjackBet" placeholder="100" min="1">
                            </div>
                            <button class="btn btn-gold w-full" onclick="startBlackjack()">ğŸƒ Deal</button>
                        </div>
                        <div id="blackjackControls" class="hidden">
                            <div class="blackjack-controls">
                                <button class="btn btn-green" onclick="blackjackHit()">Hit</button>
                                <button class="btn btn-red" onclick="blackjackStand()">Stand</button>
                            </div>
                        </div>
                        <div class="game-result" id="blackjackResult"></div>
                    </div>
                </div>

                <!-- Cheat Multiplayer -->
                <div class="game-card cheat-game">
                    <div class="game-header">
                        <h3 class="game-title">ğŸ´ Cheat (Multiplayer)</h3>
                        <button class="btn btn-sm btn-dark" onclick="loadLobbies()">Refresh</button>
                    </div>
                    <div class="game-body">
                        <!-- Lobby List View -->
                        <div id="cheatLobbyView">
                            <div class="lobbies-list" id="lobbiesList">
                                <div class="empty-state">
                                    <div class="empty-state-icon">ğŸ´</div>
                                    <div class="empty-state-text">Loading lobbies...</div>
                                </div>
                            </div>
                            <div class="field">
                                <label>Buy-in Amount</label>
                                <input type="number" id="cheatBuyIn" value="100" min="100">
                            </div>
                            <button class="btn btn-gold w-full" onclick="createLobby()">Create New Lobby</button>
                        </div>
                        
                        <!-- Waiting Room View -->
                        <div id="cheatWaitView" class="hidden">
                            <div class="cheat-status" id="waitingStatus"></div>
                            <div class="players-list" id="waitingPlayers"></div>
                            <div id="waitingControls"></div>
                        </div>
                        
                        <!-- Game View -->
                        <div id="cheatGameView" class="hidden">
                            <div class="cheat-status" id="gameStatus"></div>
                            <div class="pile-display">
                                <div class="pile-count" id="pileCount">0</div>
                                <div class="pile-label">cards in pile</div>
                                <div id="lastClaim" class="mt-1 text-muted"></div>
                            </div>
                            <div class="cheat-hand" id="cheatHand"></div>
                            <div class="cheat-controls" id="gameControls"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             PACKS SECTION
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <section class="section" id="section-packs">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <span class="card-title-icon">ğŸ</span>
                        Emoji Packs
                    </h2>
                    <button class="btn btn-sm btn-dark" onclick="showDropRates()">View Drop Rates</button>
                </div>
                <div class="packs-grid" id="packsGrid"></div>
                <button class="btn btn-gold w-full btn-lg" id="buyPackBtn" onclick="buyPack()" disabled>Select a Pack</button>
            </div>
        </section>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             COLLECTION SECTION
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <section class="section" id="section-collection">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <span class="card-title-icon">ğŸ’</span>
                        Your Collection
                    </h2>
                    <button class="btn btn-sm btn-dark" onclick="loadCollection()">Refresh</button>
                </div>
                <div class="collection-grid" id="collectionGrid">
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <div class="empty-state-icon">ğŸ’</div>
                        <div class="empty-state-text">Loading collection...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             STOCKS SECTION
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <section class="section" id="section-stocks">
            <div class="tax-banner">
                âš ï¸ <strong>2% transaction tax</strong> applies to all stock trades â€¢ Prices update every minute
            </div>
            
            <div class="card mb-2">
                <div class="card-header">
                    <h2 class="card-title">
                        <span class="card-title-icon">ğŸ“ˆ</span>
                        Stock Market
                    </h2>
                    <button class="btn btn-sm btn-dark" onclick="loadStocks()">Refresh Prices</button>
                </div>
                <div class="stocks-grid" id="stocksGrid">
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <div class="empty-state-icon">ğŸ“ˆ</div>
                        <div class="empty-state-text">Loading stocks...</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <span class="card-title-icon">ğŸ’¼</span>
                        Your Holdings
                    </h2>
                </div>
                <div style="overflow-x: auto;">
                    <table class="holdings-table">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Shares</th>
                                <th>Avg Cost</th>
                                <th>Current</th>
                                <th>Value</th>
                                <th>Profit/Loss</th>
                            </tr>
                        </thead>
                        <tbody id="holdingsBody">
                            <tr>
                                <td colspan="6" class="text-muted text-center">No holdings yet</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             LOANS SECTION
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <section class="section" id="section-loans">
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <span class="card-title-icon">ğŸ¦</span>
                            Apply for Loan
                        </h2>
                    </div>
                    <p class="text-muted mb-2" style="font-size: 12px;">Your credit score determines your maximum loan amount and interest rate. Repay on time to improve your score!</p>
                    <div class="field">
                        <label>Loan Amount</label>
                        <input type="number" id="loanAmount" placeholder="Min $1,000" min="1000">
                    </div>
                    <div class="field">
                        <label>Loan Term</label>
                        <select id="loanTerm">
                            <option value="7">7 Days (Lowest Rate)</option>
                            <option value="14">14 Days (Medium Rate)</option>
                            <option value="30">30 Days (Highest Rate)</option>
                        </select>
                    </div>
                    <button class="btn btn-gold w-full" onclick="applyForLoan()">Apply for Loan</button>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <span class="card-title-icon">ğŸ“‹</span>
                            Active Loans
                        </h2>
                        <button class="btn btn-sm btn-dark" onclick="loadLoans()">Refresh</button>
                    </div>
                    <div id="loansList">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ“‹</div>
                            <div class="empty-state-text">No active loans</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             LEADERBOARD SECTION
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <section class="section" id="section-leaderboard">
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <span class="card-title-icon">ğŸ’°</span>
                            Wealth Leaderboard
                        </h2>
                    </div>
                    <div class="leaderboard-list" id="wealthLeaderboard">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ’°</div>
                            <div class="empty-state-text">Loading...</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <span class="card-title-icon">ğŸ’</span>
                            Emoji Leaderboard
                        </h2>
                    </div>
                    <div class="leaderboard-list" id="emojiLeaderboard">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ’</div>
                            <div class="empty-state-text">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             CHAT SECTION
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <section class="section" id="section-chat">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <span class="card-title-icon">ğŸ’¬</span>
                        Global Chat
                    </h2>
                    <button class="btn btn-sm btn-dark" onclick="loadChat()">Refresh</button>
                </div>
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ’¬</div>
                            <div class="empty-state-text">Loading messages...</div>
                        </div>
                    </div>
                    <div class="chat-input-row">
                        <input type="text" id="chatInput" placeholder="Type your message..." maxlength="500" onkeypress="if(event.key === 'Enter') sendChatMessage()">
                        <button class="btn btn-gold" onclick="sendChatMessage()">Send</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             ADMIN SECTION
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <section class="section" id="section-admin">
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <span class="card-title-icon">ğŸ‘‘</span>
                            All Users
                        </h2>
                        <button class="btn btn-sm btn-dark" onclick="loadAdminUsers()">Refresh</button>
                    </div>
                    <div style="overflow-x: auto;">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Balance</th>
                                    <th>Credit</th>
                                </tr>
                            </thead>
                            <tbody id="adminUsersBody">
                                <tr>
                                    <td colspan="4" class="text-muted text-center">Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <span class="card-title-icon">ğŸ’°</span>
                            Add Money
                        </h2>
                    </div>
                    <div class="field">
                        <label>User Email</label>
                        <input type="email" id="adminTargetEmail" placeholder="user@example.com">
                    </div>
                    <div class="field">
                        <label>Amount</label>
                        <input type="number" id="adminAmount" placeholder="Amount to add">
                    </div>
                    <button class="btn btn-green w-full" onclick="adminAddMoney()">Add Money</button>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- Toast Notification -->
<div class="toast" id="toast">
    <span class="toast-icon" id="toastIcon">â„¹ï¸</span>
    <span class="toast-message" id="toastMessage"></span>
</div>

<!-- Pack Reveal Modal -->
<div class="modal" id="revealModal">
    <div class="modal-content">
        <div class="reveal-emoji" id="revealEmoji">ğŸ</div>
        <div class="reveal-rarity" id="revealRarity">Opening...</div>
        <div class="reveal-points" id="revealPoints"></div>
        <button class="btn btn-gold btn-lg" onclick="closeRevealModal()">Awesome!</button>
    </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFIGURATION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

// âš ï¸ PASTE YOUR GOOGLE APPS SCRIPT DEPLOYMENT URL HERE:
const API_URL = 'https://script.google.com/macros/s/AKfycbxECecvKqK-e4YWUJ7WKFsYMAAVldTu5hJyij7T74rBmyO_N3imwxbFXj4KQjSLgK5GOQ/exec';

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE MANAGEMENT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let currentUser = null;
let selectedPack = null;
let selectedColor = null;

// Crash game state
let crashActive = false;
let crashMultiplier = 1;
let crashBetAmount = 0;
let crashInterval = null;
let crashPoint = 0;

// Blackjack state
let bjDeck = [];
let bjPlayerHand = [];
let bjDealerHand = [];
let bjBetAmount = 0;
let bjGameActive = false;

// Cheat multiplayer state
let currentLobbyId = null;
let pollInterval = null;
let selectedCards = [];
let myHand = [];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   API HELPER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function api(action, params = {}) {
    try {
        const url = new URL(API_URL);
        url.searchParams.append('action', action);
        
        for (const [key, value] of Object.entries(params)) {
            if (value !== null && value !== undefined) {
                url.searchParams.append(key, String(value));
            }
        }
        
        const response = await fetch(url.toString());
        const text = await response.text();
        
        try {
            return JSON.parse(text);
        } catch (e) {
            console.error('JSON parse error:', text);
            return { success: false, error: 'Invalid response from server' };
        }
    } catch (error) {
        console.error('API Error:', error);
        return { success: false, error: 'Connection failed: ' + error.message };
    }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UTILITIES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toast(message, type = 'info') {
    const toastEl = document.getElementById('toast');
    const iconEl = document.getElementById('toastIcon');
    const msgEl = document.getElementById('toastMessage');
    
    toastEl.className = 'toast show ' + type;
    iconEl.textContent = type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸';
    msgEl.textContent = message;
    
    setTimeout(() => {
        toastEl.classList.remove('show');
    }, 4000);
}

function formatMoney(amount) {
    const num = parseFloat(amount) || 0;
    if (num >= 1e9) return '$' + (num / 1e9).toFixed(2) + 'B';
    if (num >= 1e6) return '$' + (num / 1e6).toFixed(2) + 'M';
    if (num >= 1e3) return '$' + (num / 1e3).toFixed(1) + 'K';
    return '$' + num.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
}

function updateBalance(newBalance) {
    currentUser.balance = newBalance;
    document.getElementById('headerBalance').textContent = formatMoney(newBalance);
    document.getElementById('statBalance').textContent = formatMoney(newBalance);
    localStorage.setItem('lintoriaUser', JSON.stringify(currentUser));
}

function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AUTHENTICATION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function switchAuthTab(tab, button) {
    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
    
    button.classList.add('active');
    document.getElementById(tab + 'Form').classList.add('active');
}

async function handleLogin() {
    const email = document.getElementById('loginEmail').value.trim();
    const password = document.getElementById('loginPassword').value;
    
    if (!email || !password) {
        toast('Please fill in all fields', 'error');
        return;
    }
    
    toast('Signing in...');
    
    const result = await api('login', { email, password });
    
    if (result.success) {
        currentUser = result.user;
        localStorage.setItem('lintoriaUser', JSON.stringify(currentUser));
        showApp();
        toast('Welcome back, ' + currentUser.name + '!', 'success');
    } else {
        toast(result.error || 'Login failed', 'error');
    }
}

async function handleRegister() {
    const email = document.getElementById('registerEmail').value.trim();
    const name = document.getElementById('registerName').value.trim();
    const password = document.getElementById('registerPassword').value;
    
    if (!email || !name || !password) {
        toast('Please fill in all fields', 'error');
        return;
    }
    
    if (password.length < 4) {
        toast('Password must be at least 4 characters', 'error');
        return;
    }
    
    toast('Creating account...');
    
    const result = await api('register', { email, name, password });
    
    if (result.success) {
        currentUser = result.user;
        localStorage.setItem('lintoriaUser', JSON.stringify(currentUser));
        showApp();
        toast('Welcome to Lintoria, ' + currentUser.name + '!', 'success');
    } else {
        toast(result.error || 'Registration failed', 'error');
    }
}

function handleLogout() {
    if (confirm('Are you sure you want to logout?')) {
        currentUser = null;
        localStorage.removeItem('lintoriaUser');
        document.getElementById('authScreen').style.display = 'flex';
        document.getElementById('app').classList.remove('active');
        stopLobbyPoll();
        toast('Logged out successfully');
    }
}

function showApp() {
    document.getElementById('authScreen').style.display = 'none';
    document.getElementById('app').classList.add('active');
    
    document.getElementById('headerBalance').textContent = formatMoney(currentUser.balance);
    document.getElementById('userInitial').textContent = currentUser.name.charAt(0).toUpperCase();
    
    if (currentUser.isAdmin) {
        document.getElementById('adminNavBtn').classList.remove('hidden');
    }
    
    setupNavigation();
    loadDashboard();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAVIGATION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function setupNavigation() {
    document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const section = btn.dataset.section;
            
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            
            btn.classList.add('active');
            document.getElementById('section-' + section).classList.add('active');
            
            // Load section data
            switch (section) {
                case 'dashboard': loadDashboard(); break;
                case 'casino': loadLobbies(); break;
                case 'packs': loadPacks(); break;
                case 'collection': loadCollection(); break;
                case 'stocks': loadStocks(); break;
                case 'loans': loadLoans(); break;
                case 'leaderboard': loadLeaderboard(); break;
                case 'chat': loadChat(); break;
                case 'admin': loadAdminUsers(); break;
            }
        });
    });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DASHBOARD
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadDashboard() {
    // Load stats
    const statsResult = await api('getStats', { email: currentUser.email });
    if (statsResult.success) {
        document.getElementById('statBalance').textContent = formatMoney(statsResult.balance);
        document.getElementById('statCredit').textContent = statsResult.credit;
        document.getElementById('statEmojiPts').textContent = (statsResult.emojiPts || 0).toLocaleString();
        document.getElementById('statNetGambling').textContent = formatMoney(statsResult.netGambling || 0);
        updateBalance(statsResult.balance);
    }
    
    // Load transactions
    const txResult = await api('getTransactions', { email: currentUser.email });
    const txList = document.getElementById('transactionsList');
    
    if (txResult.success && txResult.transactions.length > 0) {
        txList.innerHTML = txResult.transactions.slice(0, 25).map(tx => `
            <div class="tx-item">
                <div class="tx-info">
                    <div class="tx-type">${escapeHtml(tx.type)}</div>
                    <div class="tx-desc">${escapeHtml(tx.desc || '')}</div>
                </div>
                <div class="tx-amount ${tx.amount >= 0 ? 'positive' : 'negative'}">
                    ${tx.amount >= 0 ? '+' : ''}${formatMoney(tx.amount)}
                </div>
            </div>
        `).join('');
    } else {
        txList.innerHTML = `
            <div class="empty-state">
                <div class="empty-state-icon">ğŸ“œ</div>
                <div class="empty-state-text">No transactions yet</div>
            </div>
        `;
    }
}

async function handleTransfer() {
    const to = document.getElementById('transferTo').value.trim();
    const amount = parseFloat(document.getElementById('transferAmount').value);
    const note = document.getElementById('transferNote').value.trim();
    
    if (!to || !amount || amount <= 0) {
        toast('Please enter recipient and amount', 'error');
        return;
    }
    
    if (amount > currentUser.balance) {
        toast('Insufficient funds', 'error');
        return;
    }
    
    const result = await api('transfer', {
        from: currentUser.email,
        to,
        amount,
        note
    });
    
    if (result.success) {
        updateBalance(result.balance);
        document.getElementById('transferTo').value = '';
        document.getElementById('transferAmount').value = '';
        document.getElementById('transferNote').value = '';
        toast('Transfer successful!', 'success');
        loadDashboard();
    } else {
        toast(result.error || 'Transfer failed', 'error');
    }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CASINO GAMES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const SLOT_SYMBOLS = ['ğŸ’', 'ğŸ‹', 'ğŸŠ', 'ğŸ‡', 'ğŸ’', '7ï¸âƒ£', 'ğŸ””', 'â­'];

async function playSlots() {
    const bet = parseFloat(document.getElementById('slotsBet').value);
    
    if (!bet || bet <= 0) {
        toast('Please enter a bet amount', 'error');
        return;
    }
    
    if (bet > currentUser.balance) {
        toast('Insufficient funds', 'error');
        return;
    }
    
    const reels = [
        document.getElementById('reel1'),
        document.getElementById('reel2'),
        document.getElementById('reel3')
    ];
    
    // Start spinning
    reels.forEach(reel => reel.classList.add('spinning'));
    
    // Generate results
    const results = [];
    for (let i = 0; i < 3; i++) {
        await new Promise(r => setTimeout(r, 500 + i * 500));
        results[i] = SLOT_SYMBOLS[Math.floor(Math.random() * SLOT_SYMBOLS.length)];
        reels[i].classList.remove('spinning');
        reels[i].textContent = results[i];
    }
    
    // Calculate payout
    const combo = results.join('');
    const payouts = {
        'ğŸ’ğŸ’ğŸ’': 3,
        'ğŸ‹ğŸ‹ğŸ‹': 4,
        'ğŸŠğŸŠğŸŠ': 5,
        'ğŸ‡ğŸ‡ğŸ‡': 8,
        'ğŸ””ğŸ””ğŸ””': 10,
        'â­â­â­': 12,
        'ğŸ’ğŸ’ğŸ’': 15,
        '7ï¸âƒ£7ï¸âƒ£7ï¸âƒ£': 25
    };
    
    let multiplier = payouts[combo] || 0;
    
    // Partial match
    if (multiplier === 0 && (results[0] === results[1] || results[1] === results[2])) {
        multiplier = 1.5;
    }
    
    const winnings = bet * multiplier;
    const net = winnings - bet;
    
    const result = await api('gamble', {
        email: currentUser.email,
        game: 'Slots',
        bet,
        outcome: multiplier > 0 ? 'win' : 'lose',
        net
    });
    
    if (result.success) {
        updateBalance(result.balance);
        const resultEl = document.getElementById('slotsResult');
        
        if (multiplier > 0) {
            resultEl.innerHTML = `<span class="text-green">ğŸ‰ ${multiplier}x - Won ${formatMoney(winnings)}!</span>`;
        } else {
            resultEl.innerHTML = `<span class="text-red">No match - Lost ${formatMoney(bet)}</span>`;
        }
    }
}

// Roulette
function selectColor(color, button) {
    selectedColor = color;
    document.querySelectorAll('.color-btn').forEach(btn => btn.classList.remove('selected'));
    button.classList.add('selected');
}

async function playRoulette() {
    if (!selectedColor) {
        toast('Please select a color', 'error');
        return;
    }
    
    const bet = parseFloat(document.getElementById('rouletteBet').value);
    
    if (!bet || bet <= 0) {
        toast('Please enter a bet amount', 'error');
        return;
    }
    
    if (bet > currentUser.balance) {
        toast('Insufficient funds', 'error');
        return;
    }
    
    document.getElementById('rouletteBtn').disabled = true;
    
    // Spin the wheel
    const wheel = document.getElementById('rouletteWheel');
    const rotation = 1800 + Math.random() * 720;
    wheel.style.transform = `rotate(${rotation}deg)`;
    
    setTimeout(async () => {
        const number = Math.floor(Math.random() * 37);
        const resultColor = number === 0 ? 'green' : (number % 2 === 0 ? 'black' : 'red');
        
        const won = selectedColor === resultColor;
        const multiplier = resultColor === 'green' ? 14 : 1.8;
        const winnings = won ? bet * multiplier : 0;
        const net = winnings - bet;
        
        const result = await api('gamble', {
            email: currentUser.email,
            game: 'Roulette',
            bet,
            outcome: won ? 'win' : 'lose',
            net
        });
        
        if (result.success) {
            updateBalance(result.balance);
            const colorEmoji = resultColor === 'red' ? 'ğŸ”´' : resultColor === 'black' ? 'âš«' : 'ğŸŸ¢';
            const resultEl = document.getElementById('rouletteResult');
            
            if (won) {
                resultEl.innerHTML = `<span class="text-green">${colorEmoji} ${number} - Won ${formatMoney(winnings)}!</span>`;
            } else {
                resultEl.innerHTML = `<span class="text-red">${colorEmoji} ${number} - Lost ${formatMoney(bet)}</span>`;
            }
        }
        
        document.getElementById('rouletteBtn').disabled = false;
    }, 4500);
}

// Coin Flip
async function playCoinFlip(choice) {
    const bet = parseFloat(document.getElementById('coinBet').value);
    
    if (!bet || bet <= 0) {
        toast('Please enter a bet amount', 'error');
        return;
    }
    
    if (bet > currentUser.balance) {
        toast('Insufficient funds', 'error');
        return;
    }
    
    const coin = document.getElementById('coin');
    coin.classList.add('flipping');
    
    setTimeout(async () => {
        coin.classList.remove('flipping');
        
        // 45% chance to win
        const result = Math.random() < 0.45 ? choice : (choice === 'heads' ? 'tails' : 'heads');
        const won = result === choice;
        
        coin.style.transform = result === 'heads' ? 'rotateY(0)' : 'rotateY(180deg)';
        
        const winnings = won ? bet * 1.9 : 0;
        const net = winnings - bet;
        
        const apiResult = await api('gamble', {
            email: currentUser.email,
            game: 'Coin Flip',
            bet,
            outcome: won ? 'win' : 'lose',
            net
        });
        
        if (apiResult.success) {
            updateBalance(apiResult.balance);
            const resultEl = document.getElementById('coinResult');
            
            if (won) {
                resultEl.innerHTML = `<span class="text-green">ğŸ‰ ${result.toUpperCase()} - Won ${formatMoney(winnings)}!</span>`;
            } else {
                resultEl.innerHTML = `<span class="text-red">${result.toUpperCase()} - Lost ${formatMoney(bet)}</span>`;
            }
        }
    }, 1500);
}

// Dice
async function playDice() {
    const bet = parseFloat(document.getElementById('diceBet').value);
    
    if (!bet || bet <= 0) {
        toast('Please enter a bet amount', 'error');
        return;
    }
    
    if (bet > currentUser.balance) {
        toast('Insufficient funds', 'error');
        return;
    }
    
    const diceEl = document.getElementById('dice');
    const faces = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'];
    
    diceEl.classList.add('rolling');
    
    let count = 0;
    const rollInterval = setInterval(() => {
        diceEl.textContent = faces[Math.floor(Math.random() * 6)];
        count++;
        if (count > 20) {
            clearInterval(rollInterval);
            diceEl.classList.remove('rolling');
        }
    }, 80);
    
    setTimeout(async () => {
        const roll = Math.floor(Math.random() * 6) + 1;
        diceEl.textContent = faces[roll - 1];
        
        const won = roll >= 4;
        const winnings = won ? bet * 1.9 : 0;
        const net = winnings - bet;
        
        const result = await api('gamble', {
            email: currentUser.email,
            game: 'Dice',
            bet,
            outcome: won ? 'win' : 'lose',
            net
        });
        
        if (result.success) {
            updateBalance(result.balance);
            const resultEl = document.getElementById('diceResult');
            
            if (won) {
                resultEl.innerHTML = `<span class="text-green">ğŸ² Rolled ${roll} - Won ${formatMoney(winnings)}!</span>`;
            } else {
                resultEl.innerHTML = `<span class="text-red">ğŸ² Rolled ${roll} - Lost ${formatMoney(bet)}</span>`;
            }
        }
    }, 1800);
}

// Crash
async function startCrash() {
    crashBetAmount = parseFloat(document.getElementById('crashBet').value);
    
    if (!crashBetAmount || crashBetAmount <= 0) {
        toast('Please enter a bet amount', 'error');
        return;
    }
    
    if (crashBetAmount > currentUser.balance) {
        toast('Insufficient funds', 'error');
        return;
    }
    
    crashActive = true;
    crashMultiplier = 1.00;
    
    // Random crash point (1.0x to 10x, with chance for higher)
    crashPoint = 1 + Math.random() * 5;
    if (Math.random() < 0.1) crashPoint += Math.random() * 10;
    
    document.getElementById('crashStartBtn').disabled = true;
    document.getElementById('crashCashBtn').disabled = false;
    document.getElementById('crashResult').innerHTML = '';
    document.getElementById('crashMultiplier').classList.remove('crashed');
    
    crashInterval = setInterval(async () => {
        crashMultiplier += 0.01 + crashMultiplier * 0.002;
        document.getElementById('crashMultiplier').textContent = crashMultiplier.toFixed(2) + 'x';
        
        if (crashMultiplier >= crashPoint) {
            clearInterval(crashInterval);
            crashActive = false;
            
            document.getElementById('crashMultiplier').textContent = 'ğŸ’¥ ' + crashMultiplier.toFixed(2) + 'x';
            document.getElementById('crashMultiplier').classList.add('crashed');
            document.getElementById('crashStartBtn').disabled = false;
            document.getElementById('crashCashBtn').disabled = true;
            
            const result = await api('gamble', {
                email: currentUser.email,
                game: 'Crash',
                bet: crashBetAmount,
                outcome: 'lose',
                net: -crashBetAmount
            });
            
            if (result.success) {
                updateBalance(result.balance);
                document.getElementById('crashResult').innerHTML = `<span class="text-red">ğŸ’¥ Crashed! Lost ${formatMoney(crashBetAmount)}</span>`;
            }
        }
    }, 50);
}

async function cashOutCrash() {
    if (!crashActive) return;
    
    clearInterval(crashInterval);
    crashActive = false;
    
    const winnings = crashBetAmount * crashMultiplier;
    const net = winnings - crashBetAmount;
    
    document.getElementById('crashStartBtn').disabled = false;
    document.getElementById('crashCashBtn').disabled = true;
    
    const result = await api('gamble', {
        email: currentUser.email,
        game: 'Crash',
        bet: crashBetAmount,
        outcome: 'win',
        net
    });
    
    if (result.success) {
        updateBalance(result.balance);
        document.getElementById('crashResult').innerHTML = `<span class="text-green">ğŸ’° Cashed out at ${crashMultiplier.toFixed(2)}x - Won ${formatMoney(winnings)}!</span>`;
    }
}

// Blackjack
function createDeck() {
    const suits = ['â™ ', 'â™¥', 'â™¦', 'â™£'];
    const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
    const deck = [];
    
    for (const suit of suits) {
        for (const value of values) {
            deck.push({ suit, value });
        }
    }
    
    // Shuffle
    for (let i = deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
    }
    
    return deck;
}

function calculateHandValue(hand) {
    let value = 0;
    let aces = 0;
    
    for (const card of hand) {
        if (card.value === 'A') {
            value += 11;
            aces++;
        } else if (['K', 'Q', 'J'].includes(card.value)) {
            value += 10;
        } else {
            value += parseInt(card.value);
        }
    }
    
    while (value > 21 && aces > 0) {
        value -= 10;
        aces--;
    }
    
    return value;
}

function renderCard(card, faceDown = false) {
    if (faceDown) {
        return '<div class="blackjack-card face-down"></div>';
    }
    
    const isRed = card.suit === 'â™¥' || card.suit === 'â™¦';
    return `<div class="blackjack-card ${isRed ? 'red' : 'black'}">
        <div>${card.value}</div>
        <div>${card.suit}</div>
    </div>`;
}

function renderBlackjackHands(hideDealer = false) {
    document.getElementById('dealerHand').innerHTML = bjDealerHand.map((card, i) => 
        renderCard(card, hideDealer && i === 1)
    ).join('');
    
    document.getElementById('playerHand').innerHTML = bjPlayerHand.map(card => renderCard(card)).join('');
    
    document.getElementById('dealerScore').textContent = hideDealer ? '?' : calculateHandValue(bjDealerHand);
    document.getElementById('playerScore').textContent = calculateHandValue(bjPlayerHand);
}

async function startBlackjack() {
    bjBetAmount = parseFloat(document.getElementById('blackjackBet').value);
    
    if (!bjBetAmount || bjBetAmount <= 0) {
        toast('Please enter a bet amount', 'error');
        return;
    }
    
    if (bjBetAmount > currentUser.balance) {
        toast('Insufficient funds', 'error');
        return;
    }
    
    bjDeck = createDeck();
    bjPlayerHand = [bjDeck.pop(), bjDeck.pop()];
    bjDealerHand = [bjDeck.pop(), bjDeck.pop()];
    bjGameActive = true;
    
    document.getElementById('blackjackBetArea').classList.add('hidden');
    document.getElementById('blackjackControls').classList.remove('hidden');
    document.getElementById('blackjackResult').innerHTML = '';
    
    renderBlackjackHands(true);
    
    // Check for blackjack
    if (calculateHandValue(bjPlayerHand) === 21) {
        await endBlackjack('blackjack');
    }
}

async function blackjackHit() {
    if (!bjGameActive) return;
    
    bjPlayerHand.push(bjDeck.pop());
    renderBlackjackHands(true);
    
    if (calculateHandValue(bjPlayerHand) > 21) {
        await endBlackjack('bust');
    }
}

async function blackjackStand() {
    if (!bjGameActive) return;
    
    bjGameActive = false;
    renderBlackjackHands(false);
    
    // Dealer draws to 17
    while (calculateHandValue(bjDealerHand) < 17) {
        await new Promise(r => setTimeout(r, 500));
        bjDealerHand.push(bjDeck.pop());
        renderBlackjackHands(false);
    }
    
    const playerValue = calculateHandValue(bjPlayerHand);
    const dealerValue = calculateHandValue(bjDealerHand);
    
    if (dealerValue > 21) {
        await endBlackjack('dealer_bust');
    } else if (playerValue > dealerValue) {
        await endBlackjack('win');
    } else if (playerValue < dealerValue) {
        await endBlackjack('lose');
    } else {
        await endBlackjack('push');
    }
}

async function endBlackjack(outcome) {
    bjGameActive = false;
    renderBlackjackHands(false);
    
    let net = 0;
    let message = '';
    
    switch (outcome) {
        case 'blackjack':
            net = bjBetAmount * 1.5;
            message = `<span class="text-green">ğŸ° BLACKJACK! Won ${formatMoney(bjBetAmount + net)}!</span>`;
            break;
        case 'win':
        case 'dealer_bust':
            net = bjBetAmount;
            message = `<span class="text-green">ğŸ‰ You win! Won ${formatMoney(bjBetAmount * 2)}!</span>`;
            break;
        case 'lose':
        case 'bust':
            net = -bjBetAmount;
            message = `<span class="text-red">ğŸ’” ${outcome === 'bust' ? 'Bust!' : 'Dealer wins!'} Lost ${formatMoney(bjBetAmount)}</span>`;
            break;
        case 'push':
            net = 0;
            message = `<span class="text-gold">ğŸ¤ Push - Bet returned</span>`;
            break;
    }
    
    const result = await api('gamble', {
        email: currentUser.email,
        game: 'Blackjack',
        bet: bjBetAmount,
        outcome: net >= 0 ? 'win' : 'lose',
        net
    });
    
    if (result.success) {
        updateBalance(result.balance);
    }
    
    document.getElementById('blackjackResult').innerHTML = message;
    document.getElementById('blackjackBetArea').classList.remove('hidden');
    document.getElementById('blackjackControls').classList.add('hidden');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHEAT MULTIPLAYER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadLobbies() {
    const result = await api('getLobbies');
    const lobbiesList = document.getElementById('lobbiesList');
    
    if (result.success && result.lobbies.length > 0) {
        lobbiesList.innerHTML = result.lobbies.map(lobby => `
            <div class="lobby-item">
                <div class="lobby-info">
                    <h4>${escapeHtml(lobby.hostName)}'s Lobby</h4>
                    <div class="lobby-meta">${lobby.players} player(s) â€¢ Pot: ${formatMoney(lobby.pot)}</div>
                </div>
                <button class="btn btn-sm btn-green" onclick="joinLobby('${lobby.id}')">Join</button>
            </div>
        `).join('');
    } else {
        lobbiesList.innerHTML = `
            <div class="empty-state">
                <div class="empty-state-icon">ğŸ´</div>
                <div class="empty-state-text">No active lobbies</div>
            </div>
        `;
    }
}

async function createLobby() {
    const buyIn = parseFloat(document.getElementById('cheatBuyIn').value) || 100;
    
    if (buyIn < 100) {
        toast('Minimum buy-in is $100', 'error');
        return;
    }
    
    if (buyIn > currentUser.balance) {
        toast('Insufficient funds', 'error');
        return;
    }
    
    const result = await api('createLobby', { email: currentUser.email, buyIn });
    
    if (result.success) {
        currentLobbyId = result.lobbyId;
        updateBalance(result.balance);
        toast('Lobby created!', 'success');
        showWaitingRoom();
        startLobbyPoll();
    } else {
        toast(result.error || 'Failed to create lobby', 'error');
    }
}

async function joinLobby(lobbyId) {
    const result = await api('joinLobby', { email: currentUser.email, lobbyId });
    
    if (result.success) {
        currentLobbyId = lobbyId;
        updateBalance(result.balance);
        toast('Joined lobby!', 'success');
        showWaitingRoom();
        startLobbyPoll();
    } else {
        toast(result.error || 'Failed to join lobby', 'error');
    }
}

function showLobbyList() {
    document.getElementById('cheatLobbyView').classList.remove('hidden');
    document.getElementById('cheatWaitView').classList.add('hidden');
    document.getElementById('cheatGameView').classList.add('hidden');
    currentLobbyId = null;
    loadLobbies();
}

function showWaitingRoom() {
    document.getElementById('cheatLobbyView').classList.add('hidden');
    document.getElementById('cheatWaitView').classList.remove('hidden');
    document.getElementById('cheatGameView').classList.add('hidden');
}

function showGameView() {
    document.getElementById('cheatLobbyView').classList.add('hidden');
    document.getElementById('cheatWaitView').classList.add('hidden');
    document.getElementById('cheatGameView').classList.remove('hidden');
}

function startLobbyPoll() {
    pollLobby();
    pollInterval = setInterval(pollLobby, 3000);
}

function stopLobbyPoll() {
    if (pollInterval) {
        clearInterval(pollInterval);
        pollInterval = null;
    }
}

async function pollLobby() {
    if (!currentLobbyId) return;
    
    const result = await api('getLobby', { email: currentUser.email, lobbyId: currentLobbyId });
    
    if (!result.success) {
        toast('Lobby ended');
        stopLobbyPoll();
        showLobbyList();
        return;
    }
    
    const { lobby, players, game, hand } = result;
    
    if (lobby.status === 'waiting') {
        renderWaitingRoom(lobby, players);
    } else if (lobby.status === 'playing') {
        showGameView();
        renderGame(lobby, players, game, hand);
    } else if (lobby.status === 'finished') {
        toast('Game ended!');
        stopLobbyPoll();
        showLobbyList();
        loadDashboard();
    }
}

function renderWaitingRoom(lobby, players) {
    const isHost = lobby.host === currentUser.email;
    
    document.getElementById('waitingStatus').innerHTML = `
        <h3 style="margin-bottom: 8px;">ğŸ´ Waiting for Players</h3>
        <div class="text-gold" style="font-size: 24px; font-weight: 700;">Pot: ${formatMoney(lobby.pot)}</div>
    `;
    
    document.getElementById('waitingPlayers').innerHTML = players.map(p => `
        <div class="player-item">
            ${p.isHost ? 'ğŸ‘‘' : 'ğŸ‘¤'} ${escapeHtml(p.name)} (${formatMoney(p.buyIn)})
        </div>
    `).join('');
    
    let controls = '';
    if (isHost) {
        if (players.length >= 2) {
            controls = `<button class="btn btn-green w-full" onclick="startCheatGame()">ğŸ® Start Game (${players.length} players)</button>`;
        } else {
            controls = '<p class="text-muted text-center">Need at least 2 players to start</p>';
        }
    } else {
        controls = '<p class="text-muted text-center">Waiting for host to start...</p>';
    }
    
    controls += `<button class="btn btn-red btn-sm w-full mt-1" onclick="leaveLobby()">Leave Lobby</button>`;
    document.getElementById('waitingControls').innerHTML = controls;
}

function renderGame(lobby, players, gameState, hand) {
    if (!gameState) return;
    
    myHand = hand || [];
    const isMyTurn = gameState.current === currentUser.email;
    const currentPlayer = players.find(p => p.email === gameState.current);
    
    document.getElementById('gameStatus').innerHTML = `
        <div class="cheat-turn ${isMyTurn ? 'my-turn' : ''}">
            ${isMyTurn ? "ğŸ¯ YOUR TURN!" : "â³ " + (currentPlayer ? currentPlayer.name : 'Someone') + "'s turn"}
        </div>
        <div class="text-muted mt-1">Pot: ${formatMoney(lobby.pot)} â€¢ Your cards: ${myHand.length}</div>
    `;
    
    document.getElementById('pileCount').textContent = gameState.pile || 0;
    document.getElementById('lastClaim').textContent = gameState.claim ? `Last claim: "${gameState.claim}"` : '';
    
    // Render hand
    if (myHand.length > 0) {
        document.getElementById('cheatHand').innerHTML = myHand.map((card, i) => {
            const isRed = card.s === 'â™¥' || card.s === 'â™¦';
            const isSelected = selectedCards.includes(i);
            return `
                <div class="cheat-card ${isRed ? 'red' : 'black'} ${isSelected ? 'selected' : ''}" onclick="toggleCard(${i})">
                    <div>${card.v}</div>
                    <div>${card.s}</div>
                </div>
            `;
        }).join('');
    } else {
        document.getElementById('cheatHand').innerHTML = '<p class="text-green">ğŸ‰ No cards left!</p>';
    }
    
    // Render controls
    let controls = '';
    if (isMyTurn && myHand.length > 0) {
        controls = `
            <div class="field">
                <label>Your Claim (e.g., "2 Kings")</label>
                <input type="text" id="claimInput" placeholder="e.g., 2 Kings">
            </div>
            <div class="btn-row">
                <button class="btn btn-green" onclick="playCheatCards()">ğŸƒ Play ${selectedCards.length} Card(s)</button>
                <button class="btn btn-red" onclick="callCheat()" ${gameState.pile > 0 ? '' : 'disabled'}>ğŸš¨ Call Cheat</button>
            </div>
        `;
    } else if (gameState.pile > 0 && gameState.lastPlayer !== currentUser.email) {
        controls = `<button class="btn btn-red w-full" onclick="callCheat()">ğŸš¨ Call Cheat on ${gameState.lastName}!</button>`;
    }
    
    document.getElementById('gameControls').innerHTML = controls;
}

function toggleCard(index) {
    const idx = selectedCards.indexOf(index);
    if (idx === -1) {
        selectedCards.push(index);
    } else {
        selectedCards.splice(idx, 1);
    }
    pollLobby();
}

async function startCheatGame() {
    const result = await api('startGame', { email: currentUser.email, lobbyId: currentLobbyId });
    
    if (result.success) {
        toast('Game started!', 'success');
        pollLobby();
    } else {
        toast(result.error || 'Failed to start game', 'error');
    }
}

async function playCheatCards() {
    if (selectedCards.length === 0) {
        toast('Select at least one card', 'error');
        return;
    }
    
    const claim = document.getElementById('claimInput').value.trim();
    if (!claim) {
        toast('Enter your claim', 'error');
        return;
    }
    
    const result = await api('playCards', {
        email: currentUser.email,
        lobbyId: currentLobbyId,
        cards: JSON.stringify(selectedCards),
        claim
    });
    
    if (result.success) {
        selectedCards = [];
        if (result.winner) {
            toast(`ğŸ† ${result.winnerName} wins ${formatMoney(result.pot)}!`, 'success');
        }
        pollLobby();
    } else {
        toast(result.error || 'Failed to play cards', 'error');
    }
}

async function callCheat() {
    const result = await api('callCheat', { email: currentUser.email, lobbyId: currentLobbyId });
    
    if (result.success) {
        if (result.caught) {
            toast('ğŸ‰ They were lying! They pick up the pile.', 'success');
        } else {
            toast('ğŸ˜… They were honest! You pick up the pile.');
        }
        
        if (result.winner) {
            toast(`ğŸ† ${result.winnerName} wins ${formatMoney(result.pot)}!`, 'success');
        }
        
        pollLobby();
    } else {
        toast(result.error || 'Failed to call cheat', 'error');
    }
}

async function leaveLobby() {
    const result = await api('leaveLobby', { email: currentUser.email, lobbyId: currentLobbyId });
    
    if (result.success) {
        updateBalance(result.balance);
    }
    
    stopLobbyPoll();
    showLobbyList();
    toast('Left lobby');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EMOJI PACKS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const PACKS = [
    { id: 'starter', name: 'Starter', price: 500, emoji: 'ğŸ“¦' },
    { id: 'bronze', name: 'Bronze', price: 1500, emoji: 'ğŸ¥‰' },
    { id: 'silver', name: 'Silver', price: 5000, emoji: 'ğŸ¥ˆ' },
    { id: 'gold', name: 'Gold', price: 15000, emoji: 'ğŸ¥‡' },
    { id: 'platinum', name: 'Platinum', price: 50000, emoji: 'ğŸ’' },
    { id: 'diamond', name: 'Diamond', price: 150000, emoji: 'ğŸ’ ' },
    { id: 'mythic', name: 'Mythic', price: 500000, emoji: 'ğŸŒŸ' },
    { id: 'divine', name: 'Divine', price: 2000000, emoji: 'ğŸ‘¼' }
];

const RARITIES = [
    { name: 'common', chance: 0.50, points: 10, sellPrice: 500, color: '#6b7280' },
    { name: 'uncommon', chance: 0.30, points: 25, sellPrice: 2000, color: '#10b981' },
    { name: 'rare', chance: 0.12, points: 100, sellPrice: 10000, color: '#3b82f6' },
    { name: 'epic', chance: 0.05, points: 500, sellPrice: 25000, color: '#a855f7' },
    { name: 'legendary', chance: 0.02, points: 2500, sellPrice: 75000, color: '#f59e0b' },
    { name: 'mythic', chance: 0.008, points: 10000, sellPrice: 200000, color: '#ec4899' },
    { name: 'divine', chance: 0.002, points: 50000, sellPrice: 500000, color: '#06b6d4' }
];

const EMOJIS = {
    common: ['ğŸ˜€', 'ğŸ˜', 'ğŸ¤”', 'ğŸ‘', 'ğŸˆ', 'â­', 'ğŸŒ¸', 'ğŸ', 'â˜•', 'ğŸ“š', 'ğŸµ', 'ğŸ’¡'],
    uncommon: ['ğŸ¦Š', 'ğŸ¸', 'ğŸŒˆ', 'ğŸ¸', 'ğŸš€', 'ğŸ’¡', 'ğŸ¯', 'ğŸ†', 'ğŸª', 'ğŸ­', 'ğŸ¨', 'ğŸ¬'],
    rare: ['ğŸ¦„', 'ğŸ‰', 'ğŸŒ™', 'ğŸ’«', 'ğŸ”®', 'âš¡', 'ğŸ©', 'ğŸ‘‘', 'ğŸ’', 'ğŸ—¡ï¸', 'ğŸ›¡ï¸', 'ğŸ°'],
    epic: ['ğŸ¦‹', 'ğŸŒº', 'ğŸ”¥', 'â„ï¸', 'ğŸŒŠ', 'ğŸŒªï¸', 'â˜„ï¸', 'ğŸŒ ', 'ğŸ†', 'ğŸ’–', 'ğŸ’œ', 'ğŸ’™'],
    legendary: ['ğŸ²', 'ğŸ¦…', 'ğŸ¦', 'ğŸº', 'ğŸ¦š', 'ğŸ¦¢', 'ğŸ¦©', 'ğŸ¦œ', 'ğŸ¦‰', 'ğŸ¦â€ğŸ”¥'],
    mythic: ['ğŸ‘¾', 'ğŸ¤–', 'ğŸ‘½', 'ğŸ›¸', 'ğŸ§¬', 'ğŸ’ ', 'ğŸ”±', 'âšœï¸', 'ğŸ…', 'ğŸ–ï¸'],
    divine: ['âœ¨', 'ğŸŒŸ', 'ğŸ’«', 'ğŸŒˆ', 'ğŸ¦‹', 'ğŸ‘¼', 'ğŸŒ¸', 'ğŸ”®', 'ğŸ’', 'ğŸ‘‘']
};

function loadPacks() {
    document.getElementById('packsGrid').innerHTML = PACKS.map(pack => `
        <div class="pack-card ${selectedPack === pack.id ? 'selected' : ''}" onclick="selectPack('${pack.id}')">
            <div class="pack-emoji">${pack.emoji}</div>
            <div class="pack-name">${pack.name}</div>
            <div class="pack-price">${formatMoney(pack.price)}</div>
        </div>
    `).join('');
}

function selectPack(packId) {
    selectedPack = packId;
    const pack = PACKS.find(p => p.id === packId);
    loadPacks();
    
    const btn = document.getElementById('buyPackBtn');
    btn.disabled = false;
    btn.textContent = `Buy ${pack.name} Pack â€” ${formatMoney(pack.price)}`;
}

async function buyPack() {
    if (!selectedPack) return;
    
    const pack = PACKS.find(p => p.id === selectedPack);
    
    if (currentUser.balance < pack.price) {
        toast('Insufficient funds', 'error');
        return;
    }
    
    // Determine rarity
    let roll = Math.random();
    let cumulative = 0;
    let rarity = RARITIES[0];
    
    for (const r of RARITIES) {
        cumulative += r.chance;
        if (roll <= cumulative) {
            rarity = r;
            break;
        }
    }
    
    // Get random emoji
    const emojiList = EMOJIS[rarity.name];
    const emoji = emojiList[Math.floor(Math.random() * emojiList.length)];
    
    const result = await api('buyPack', {
        email: currentUser.email,
        packId: selectedPack,
        emoji: encodeURIComponent(emoji),
        rarity: rarity.name,
        points: rarity.points
    });
    
    if (result.success) {
        updateBalance(result.balance);
        showRevealModal(emoji, rarity.name, rarity.points, rarity.color);
    } else {
        toast(result.error || 'Failed to buy pack', 'error');
    }
}

function showRevealModal(emoji, rarity, points, color) {
    document.getElementById('revealEmoji').textContent = emoji;
    document.getElementById('revealRarity').textContent = rarity;
    document.getElementById('revealRarity').className = 'reveal-rarity rarity-' + rarity;
    document.getElementById('revealPoints').textContent = '+' + points.toLocaleString() + ' points';
    document.getElementById('revealModal').classList.add('show');
}

function closeRevealModal() {
    document.getElementById('revealModal').classList.remove('show');
}

function showDropRates() {
    let message = 'DROP RATES:\n\n';
    RARITIES.forEach(r => {
        message += `${r.name.toUpperCase()}: ${(r.chance * 100).toFixed(1)}% â€” ${r.points} pts â€” Sells for ${formatMoney(r.sellPrice)}\n`;
    });
    alert(message);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COLLECTION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadCollection() {
    const result = await api('getCollection', { email: currentUser.email });
    const grid = document.getElementById('collectionGrid');
    
    if (result.success && result.collection.length > 0) {
        grid.innerHTML = result.collection.map(item => {
            const rarity = RARITIES.find(r => r.name === item.rarity) || RARITIES[0];
            return `
                <div class="collection-item" onclick="sellEmoji('${encodeURIComponent(item.emoji)}', '${item.rarity}', ${rarity.sellPrice})">
                    <div class="collection-emoji">${item.emoji}</div>
                    <div class="collection-rarity rarity-${item.rarity}">${item.rarity}</div>
                </div>
            `;
        }).join('');
    } else {
        grid.innerHTML = `
            <div class="empty-state" style="grid-column: 1 / -1;">
                <div class="empty-state-icon">ğŸ’</div>
                <div class="empty-state-text">Your collection is empty. Buy some packs!</div>
            </div>
        `;
    }
}

async function sellEmoji(emoji, rarity, price) {
    if (!confirm(`Sell this ${rarity} emoji for ${formatMoney(price)}?`)) return;
    
    const result = await api('sellEmoji', {
        email: currentUser.email,
        emoji,
        rarity,
        price
    });
    
    if (result.success) {
        updateBalance(result.balance);
        toast(`Sold for ${formatMoney(price)}!`, 'success');
        loadCollection();
    } else {
        toast(result.error || 'Failed to sell', 'error');
    }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STOCKS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadStocks() {
    const result = await api('getStocks');
    const grid = document.getElementById('stocksGrid');
    
    if (result.success && result.stocks.length > 0) {
        grid.innerHTML = result.stocks.map(stock => {
            const changeClass = stock.change >= 0 ? 'up' : 'down';
            const changeIcon = stock.change >= 0 ? 'â–²' : 'â–¼';
            
            return `
                <div class="stock-card">
                    <div class="stock-header">
                        <div class="stock-symbol">${stock.symbol}</div>
                        <div class="stock-change ${changeClass}">${changeIcon} ${Math.abs(stock.change).toFixed(2)}%</div>
                    </div>
                    <div class="stock-name">${stock.name}</div>
                    <div class="stock-price">${formatMoney(stock.price)}</div>
                    <div class="stock-actions">
                        <input type="number" id="qty-${stock.symbol}" value="1" min="1">
                        <button class="btn btn-sm btn-green" onclick="buyStock('${stock.symbol}', ${stock.price})">Buy</button>
                        <button class="btn btn-sm btn-red" onclick="sellStock('${stock.symbol}')">Sell</button>
                    </div>
                </div>
            `;
        }).join('');
    } else {
        grid.innerHTML = `
            <div class="empty-state" style="grid-column: 1 / -1;">
                <div class="empty-state-icon">ğŸ“ˆ</div>
                <div class="empty-state-text">No stocks available</div>
            </div>
        `;
    }
    
    loadHoldings();
}

async function loadHoldings() {
    const result = await api('getHoldings', { email: currentUser.email });
    const tbody = document.getElementById('holdingsBody');
    
    if (result.success && result.holdings.length > 0) {
        tbody.innerHTML = result.holdings.map(h => `
            <tr>
                <td><strong>${h.symbol}</strong></td>
                <td>${h.shares}</td>
                <td>${formatMoney(h.avgCost)}</td>
                <td>${formatMoney(h.currentPrice)}</td>
                <td>${formatMoney(h.value)}</td>
                <td class="${h.profit >= 0 ? 'profit-positive' : 'profit-negative'}">
                    ${h.profit >= 0 ? '+' : ''}${formatMoney(h.profit)}
                </td>
            </tr>
        `).join('');
    } else {
        tbody.innerHTML = '<tr><td colspan="6" class="text-muted text-center">No holdings yet</td></tr>';
    }
}

async function buyStock(symbol, price) {
    const qty = parseInt(document.getElementById('qty-' + symbol).value) || 1;
    const total = qty * price * 1.02; // Include tax
    
    if (total > currentUser.balance) {
        toast('Insufficient funds (including 2% tax)', 'error');
        return;
    }
    
    const result = await api('buyStock', {
        email: currentUser.email,
        symbol,
        qty
    });
    
    if (result.success) {
        updateBalance(result.balance);
        toast(`Bought ${qty} ${symbol}`, 'success');
        loadStocks();
    } else {
        toast(result.error || 'Failed to buy', 'error');
    }
}

async function sellStock(symbol) {
    const qty = parseInt(document.getElementById('qty-' + symbol).value) || 1;
    
    const result = await api('sellStock', {
        email: currentUser.email,
        symbol,
        qty
    });
    
    if (result.success) {
        updateBalance(result.balance);
        toast(`Sold ${qty} ${symbol}`, 'success');
        loadStocks();
    } else {
        toast(result.error || 'Failed to sell', 'error');
    }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOANS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadLoans() {
    const result = await api('getLoans', { email: currentUser.email });
    const list = document.getElementById('loansList');
    
    if (result.success && result.loans.length > 0) {
        list.innerHTML = result.loans.map(loan => {
            const dueDate = new Date(loan.due);
            const isOverdue = dueDate < new Date();
            
            return `
                <div class="loan-card ${isOverdue ? 'overdue' : ''}">
                    <div class="loan-header">
                        <span class="loan-id">#${loan.id}</span>
                        <span class="loan-due ${isOverdue ? 'overdue' : ''}">${isOverdue ? 'âš ï¸ OVERDUE' : 'Due: ' + dueDate.toLocaleDateString()}</span>
                    </div>
                    <div class="loan-details">
                        <div>Principal: ${formatMoney(loan.principal)}</div>
                        <div>Interest: ${formatMoney(loan.interest)}</div>
                        <div>Total: <strong class="text-gold">${formatMoney(loan.total)}</strong></div>
                        <div>Rate: ${loan.rate}%</div>
                    </div>
                    <button class="btn btn-green btn-sm w-full" onclick="repayLoan('${loan.id}')">Repay ${formatMoney(loan.total)}</button>
                </div>
            `;
        }).join('');
    } else {
        list.innerHTML = `
            <div class="empty-state">
                <div class="empty-state-icon">ğŸ“‹</div>
                <div class="empty-state-text">No active loans</div>
            </div>
        `;
    }
}

async function applyForLoan() {
    const amount = parseFloat(document.getElementById('loanAmount').value);
    const term = parseInt(document.getElementById('loanTerm').value);
    
    if (!amount || amount < 1000) {
        toast('Minimum loan amount is $1,000', 'error');
        return;
    }
    
    const result = await api('applyLoan', {
        email: currentUser.email,
        amount,
        term
    });
    
    if (result.success) {
        updateBalance(result.balance);
        toast(`Loan approved! ${formatMoney(amount)} credited to your account`, 'success');
        document.getElementById('loanAmount').value = '';
        loadLoans();
    } else {
        toast(result.error || 'Loan denied', 'error');
    }
}

async function repayLoan(loanId) {
    const result = await api('repayLoan', {
        email: currentUser.email,
        loanId
    });
    
    if (result.success) {
        updateBalance(result.balance);
        toast('Loan repaid! Credit score: ' + result.credit, 'success');
        loadLoans();
    } else {
        toast(result.error || 'Failed to repay', 'error');
    }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LEADERBOARD
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadLeaderboard() {
    const result = await api('getLeaderboard');
    
    if (result.success) {
        document.getElementById('wealthLeaderboard').innerHTML = result.wealth.map((user, i) => `
            <div class="leaderboard-item">
                <div class="leaderboard-rank ${i < 3 ? 'rank-' + (i + 1) : ''}">${i < 3 ? ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'][i] : i + 1}</div>
                <div class="leaderboard-info">
                    <div class="leaderboard-name">${escapeHtml(user.name)}</div>
                </div>
                <div class="leaderboard-score">${formatMoney(user.balance)}</div>
            </div>
        `).join('');
        
        document.getElementById('emojiLeaderboard').innerHTML = result.emoji.map((user, i) => `
            <div class="leaderboard-item">
                <div class="leaderboard-rank ${i < 3 ? 'rank-' + (i + 1) : ''}">${i < 3 ? ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'][i] : i + 1}</div>
                <div class="leaderboard-info">
                    <div class="leaderboard-name">${escapeHtml(user.name)}</div>
                </div>
                <div class="leaderboard-score">${(user.emojiPts || 0).toLocaleString()} pts</div>
            </div>
        `).join('');
    }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHAT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadChat() {
    const result = await api('getChat');
    const messagesEl = document.getElementById('chatMessages');
    
    if (result.success && result.messages.length > 0) {
        messagesEl.innerHTML = result.messages.map(msg => `
            <div class="chat-message">
                <div class="chat-message-header">
                    <span class="chat-author">${escapeHtml(msg.name)}</span>
                    <span class="chat-time">${new Date(msg.time).toLocaleTimeString()}</span>
                </div>
                <div class="chat-text">${escapeHtml(msg.message)}</div>
            </div>
        `).join('');
        
        messagesEl.scrollTop = messagesEl.scrollHeight;
    } else {
        messagesEl.innerHTML = `
            <div class="empty-state">
                <div class="empty-state-icon">ğŸ’¬</div>
                <div class="empty-state-text">No messages yet. Start the conversation!</div>
            </div>
        `;
    }
}

async function sendChatMessage() {
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    
    if (!message) return;
    
    const result = await api('sendChat', {
        email: currentUser.email,
        name: currentUser.name,
        message
    });
    
    if (result.success) {
        input.value = '';
        loadChat();
    } else {
        toast(result.error || 'Failed to send', 'error');
    }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ADMIN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadAdminUsers() {
    const result = await api('getAllUsers', { email: currentUser.email });
    const tbody = document.getElementById('adminUsersBody');
    
    if (result.success) {
        tbody.innerHTML = result.users.map(user => `
            <tr>
                <td>${escapeHtml(user.name)}</td>
                <td>${escapeHtml(user.email)}</td>
                <td>${formatMoney(user.balance)}</td>
                <td>${user.credit}</td>
            </tr>
        `).join('');
    } else {
        tbody.innerHTML = '<tr><td colspan="4" class="text-muted text-center">Not authorized</td></tr>';
    }
}

async function adminAddMoney() {
    const email = document.getElementById('adminTargetEmail').value.trim();
    const amount = parseFloat(document.getElementById('adminAmount').value);
    
    if (!email || !amount) {
        toast('Please fill in all fields', 'error');
        return;
    }
    
    const result = await api('adminAdd', {
        admin: currentUser.email,
        target: email,
        amount
    });
    
    if (result.success) {
        toast(`Added ${formatMoney(amount)} to ${email}`, 'success');
        document.getElementById('adminTargetEmail').value = '';
        document.getElementById('adminAmount').value = '';
        loadAdminUsers();
    } else {
        toast(result.error || 'Failed', 'error');
    }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INITIALIZATION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.addEventListener('DOMContentLoaded', () => {
    // Check for saved session
    const savedUser = localStorage.getItem('lintoriaUser');
    
    if (savedUser) {
        try {
            currentUser = JSON.parse(savedUser);
            showApp();
        } catch (e) {
            localStorage.removeItem('lintoriaUser');
        }
    }
});
</script>
</body>
</html>
